{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="description" content="AI Team Chat: Gain insights and consult on our artificial intelligence services.">
    <meta name="keywords" content="EFEXZIUM, AI Team, AI, Team, Chat, Artificial Intelligence, Website creation, sitios web con IA, Create, clients, plans, Subscriptions, page">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="gx3tJHQRVDGpImUUJXn_cWvSrcUnGjJTgW8H1dHzIRI" />
    <title> {{header}} {% trans " Artificial Intelligence Services by Ai-team" %}</title>
    
    <link rel="canonical" href="{% url 'ai-team' context='main' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Bootstrap CSS python manage.py runserver-->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href={% static "css/style_chat.css" %} rel="stylesheet"> 
    
</head>

<body data-language-prefix="{{ LANGUAGE_CODE }}"></body>>
    
    <div class="container-fluid h-100">
        <div class="row h-100 justify-content-center">
    
            <!-- Chat Header -->
            <div class="chat-header d-flex justify-content-between align-items-center px-3 py-2 glass">
                <div class="nav-container nav-container d-flex align-items-center">
                    <!-- Asegúrate de que el checkbox tiene el id correcto -->
                    <input class="checkbox" type="checkbox" id="hamburgerToggle" />
                    <!-- Vincula el label (hamburger-lines) con el checkbox mediante el atributo "for" -->
                    <label class="hamburger-lines" for="hamburgerToggle">
                        <i class="bi bi-list"></i>
                    </label>
                     <!-- Añade esta línea para el menú -->
                    <div class="menu-items glass" > <!-- Ajusta la posición vertical -->
                        <ul>
                            <li cy-data="home-link" ><a href="{% url 'ai-team' context='main' %}" title="Main page of AI Team Chat"><h2 class="reset-styles" >{% trans "Home"%}</h2></a></li>

                            {% if user.is_authenticated %}
                                <li cy-data="logout-link"><a href="{% url 'logout' %}" title="logout"><h2 class="reset-styles" >{% trans "Logout"%}</h2></a></li>
                                <li cy-data="panel-link"><a href="{% url 'ai-team' context='panel-admin' %}" id="panel-admin-link" title="Your Panel Admin to create a site-web"><h2 class="reset-styles" >Admin Panel</h2></a></li>
                                <li><a href="{% url 'ai-team' context='subscription' %}" title="See our subscriptions plans"><h2 class="reset-styles" >{% trans "Subscriptions"%}</h2></a></li>
                                {% if user.is_superuser %}
                                <li><a href="{% url 'create_subscription' %}"  title="Crete Subscription"><h2 class="reset-styles">Create Subscription</h2></a></li>
                                <li><a href="{% url 'list_subscriptions' list_all='clients'%}"  title="Clients"><h2 class="reset-styles">Clients</h2></a></li>
                                <li><a href="{% url 'list_subscriptions' list_all='plans'%}"  title="Plans"><h2 class="reset-styles">Plans</h2></a></li>
                                {% endif %}
                            {% else %}
                                <li cy-data="login-link"><a href="{% url 'login' %}" title="login to AI Team for more"><h2 class="reset-styles" >{% trans "Login" %}</h2></a></li>
                                <li cy-data="faq-link"><a title="frequently asked questions about AI Team"><h2 data-template="faqs_messages" class="reset-styles">{% trans "FAQs"%}</h2></a></li>
                                <li cy-data="contact-link"><a  title="How to Contac us"><h2 data-template="contact_us" class="reset-styles">{% trans "Contact Us"%}</h2></a></li>
                                <li cy-data="about-link"><a title="Who we are and our members"><h2 data-template="about_us" class="reset-styles">{% trans "About Us"%}</h2></a></li>
                                <li cy-data="generate-endpoint"><a ><h2 data-template="generate_endpoint" class="reset-styles">Generate Endpoint</h2></a></li>
                                <li cy-data="delete-endpoint"><a ><h2 data-template="delete_endpoint" class="reset-styles">Delete Endpoint</h2></a></li>
                            {% endif %}
                            
                            {% if context_value == "main" and user.is_authenticated%}
                            <li cy-data="faq-link"><a title="frequently asked questions about AI Team"><h2 data-template="faqs_messages" class="reset-styles">{% trans "FAQs"%}</h2></a></li>
                            <li cy-data="contact-link"><a  title="How to Contac us"><h2 data-template="contact_us" class="reset-styles">{% trans "Contact Us"%}</h2></a></li>
                            <li cy-data="about-link"><a title="Who we are and our members"><h2 data-template="about_us" class="reset-styles">{% trans "About Us"%}</h2></a></li>
                            {% endif %}

                            {% if context_value in valid_contexts %}
                                {% if site_exists %}
                                <li cy-data="my-site-link"><a href="{{ my_site_IA }}">{{my_site_title}}</a></li>
                                {% endif %}
                            {% endif %}
                        </ul>
                    
                    </div>
                    <h1 class="chat-title">{{title}} =$=</h1>     
                </div>
            
                  
            </div>
            <!-- Chat Content -->
            <div class="col-12 messages-container px-0">
                <!-- Metallic Text -->
                <div class="metallic-text">
                    <h2 class="reset-styles">{% trans "An AI Team is writing"%}</h2>
                </div>
                <div class="chat-body px-3 py-2" id="chatBox">
                    {% if context_value == "main" %}
                        <div class="message-left glass">
                            <p class="message-content">
                                {% trans "Website creation service with"%} AI: {% trans "24/7 customer service better than a human being with AI like gpt 4. Integration with database and systems of your website or app. Create an AI bot in 5 minutes that sends emails and processes payments and orders."%}<br>
                                <br>
                                {% if user.is_authenticated %}
                                    {% trans "Welcome to AI Team"%} {{ user.email}} {% trans "Ask your questions about our services"%} <br>
                                {% endif %}
                                
                            </p>           
                            <button class="btn btn-light btn-sm me-2" title="Copiar"><i class="bi bi-clipboard"></i></button>
                            <button class="btn btn-light btn-sm me-2" title="Me gusta"><i class="bi bi-hand-thumbs-up"></i></button>
                            <button class="btn btn-light btn-sm" title="No me gusta"><i class="bi bi-hand-thumbs-down"></i></button>
                        </div>
                    {% elif context_value == "subscription" %}
                        {% if user.is_subscribe %}
                            <!-- Aiteam give info to user about our plans -->
                            <div class="message-left glass">
                                <p class="message-content">
                                    {% trans "Information about your subscription:"%} <br>
                                    {% trans "you current plan:"%} {{user.subscription_detail.plan_name}} <br>
                                    {% trans "Subscription Status:"%} {{user.subscription_status}} <br>
                                    {% trans "Pay with:"%} Paypal <br>
                                    {% trans "the plan expires:"%} {{user.next_date_pay}} <br>
                                    {% trans "Subscribed from Date:"%} {{user.date_subscription}}  <br>
                                    {% trans "if you wanna upgrade your current subscription visit the"%} <a href="{% url 'subscription' %}" title="see our subscription plans"><strong class="white-link" >{% trans "Subscription"%}</strong></a> {% trans "page"%}
                                </p>            
                                <div class="mt-2">
                                    <form id="cancel-subscription-form" method="post">
                                        {% csrf_token %}
                                        <input type="hidden" name="action" value="cancel_subscription">
                                        <button type="submit" class="btn btn-danger">{% trans "Cancel Subscription" %}</button>
                                    </form>
                                                                                                                           
                                </div>
                            </div>
                        {% else %}
                            <div class="message-left glass">
                                <p class="message-content">
                                    {% trans "We are thrilled to introduce our range of subscription plans tailored to enhance your experience on our website. These plans are designed to provide you with exclusive benefits and access to premium features, ensuring you get the most out of your online journey with us:" %} <br>
                                    <strong>{% trans "Entry Plan" %}</strong> <br>
                                    <strong>{% trans "Premium Plan" %}</strong> <br>
                                    <strong>{% trans "Enterprise Plan" %}</strong> <br>
                                    {% trans "you can get any of this subscriptions en the next page:" %}  <a href="{% url 'subscription' %}" title="login to AI Team for more"><strong class="white-link" >{% trans "Subscription" %}</strong></a> {% trans "page"%}
                                </p>
                                <p class="message-content">{% trans "if you wanna know about each plan, only send a message and AI Team response you" %}</p>
                                <div class="mt-2">
                                    <button class="btn btn-light btn-sm me-2" title="Copiar"><i class="bi bi-clipboard"></i></button>
                                    <button class="btn btn-light btn-sm me-2" title="Me gusta"><i class="bi bi-hand-thumbs-up"></i></button>
                                    <button class="btn btn-light btn-sm" title="No me gusta"><i class="bi bi-hand-thumbs-down"></i></button>
                                </div>
                            </div>
                        {% endif %}
                    {% elif context_value == "panel-admin" %}
                    <div class="message-left glass">
                        <p class="message-content">
                            {% trans "Welcome to our AI Chat Page Creation tool! With this tool, you can craft a unique AI Chat Experience by providing information through uploaded files (PDF or TXT). Here's how to proceed:" %}<br><br>
                            
                            <strong>{% trans "1 Upload Your Content:" %}</strong> 
                            {% trans "Prepare a PDF or TXT file including the following details for your custom AI Chat Page:" %}<br>
                            - {% trans "Page Title: The name shown on the browser tab." %}<br>
                            - {% trans "Page Header: The main title or heading on your page." %}<br>
                            - {% trans "Navigation Links: List of navigation items and their URLs." %}<br>
                            - {% trans "Default Chat Message: A greeting message for visitors." %}<br>
                            - {% trans "Products: Detailed descriptions of your products." %}<br>
                            - {% trans "Context Information: Any additional information, questions, and answers you want the AI to use for personalized responses." %}<br><br>
                            
                            <strong>{% trans "2 Images:" %}</strong> 
                            {% trans "For product images, upload each image with the name matching exactly with the product name described in your file." %}<br><br>
                            
                            <strong>{% trans "3 Consult and Monitor:" %}</strong> 
                            {% trans "Use this chat to consult the details of your site and monitor the progress. Once your content is processed, a custom link to your AI Chat Page will be available." %}<br><br>
                            
                            {% trans "Remember, the AI will respond based on the context and information provided in your uploaded files, ensuring a tailored experience for your visitors. We're here to help you every step of the way!" %}<br><br>
                    
                            {% trans "Get started now by uploading your file and let's create an amazing AI Chat Experience together!" %}
                        </p>
                       
                        <div class="mt-2">
                            <button class="btn btn-light btn-sm me-2" title="Copiar"><i class="bi bi-clipboard"></i></button>
                            <button class="btn btn-light btn-sm me-2" title="Me gusta"><i class="bi bi-hand-thumbs-up"></i></button>
                            <button class="btn btn-light btn-sm" title="No me gusta"><i class="bi bi-hand-thumbs-down"></i></button>
                        </div>
                    </div>
                    
                    {% else %}
                        <!--Here will stay the messages with Ai-team-->
                    {% endif %} <!-- Cierre del if context_value == "subscription" -->
                </div>
            </div>
            
    
            <!-- Chat Footer -->
            <div class="chat-footer">
                <div class="footer-content">
                    <span id="totalCostDisplay"></span>
                    <div class="loading-dots-container">
                        <div class="loading-dots">
                            <span class="dot dot-1"></span>
                            <span class="dot dot-2"></span>
                            <span class="dot dot-3"></span>
                        </div>
                        <br>
                    </div>
                    <span class="total-cost" id="totalCostDisplay"></span>
                    <div class="formulary">
                        {% csrf_token %}
                        <input type="text" class="form_input" id="userMessage" placeholder="Send a message..." onkeydown="handleKeyDown(event, '{{context_value}}')">
                        <button class="btn btn-send" onclick="sendMessage( '{{context_value}}' )">{% trans "Send" %}</button>
                        {% if context_value == 'panel-admin' %}
                            <!-- Input escondido para subir archivos -->
                            
                            <input type="file" style="display: none;" id="fileInput" name="uploaded_files" multiple accept=".pdf,.txt, .png">
                            <label for="fileInput" class="btn btn-send">{% trans "Upload" %}</label>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% include "hidden-ai-team.html" %}


</body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src={% static 'js/landing.js' %} ></script> 
    <!-- Opcionalmente, jQuery y Bootstrap JS al final justo antes de cerrar la etiqueta </body> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        var currentContext = "{{ context_value }}";  // Aquí asumimos que has pasado context_value a tu template.
    </script>
    <script>
        console.log({{ LANGUAGE_CODE }});
        var LANGUAGE_CODE = '{{ LANGUAGE_CODE }}'; // Django inyecta el código de idioma actual aquí
    </script>
    <script>
        $(document).ready(function () {
            // Get the text content of the first h1
            var h1Text = $("h1:first").text();

            // Get the first two words from the h1 text
            var h1Keywords = h1Text.split(' ').slice(0, 2).join(' ');

            // Get the text content of the first p
            var pText = $("p:first").text().trim(); // Trim leading and trailing spaces

            // Get the first two words from the p text
            var pKeywords = pText.split(/\s+/).slice(0, 2).join(' ');
            console.log(h1Keywords + ' , '+ pKeywords)
            // Concatenate the keywords from h1 and p
            var existingKeywords = $("meta[name='keywords']").attr('content');

            // Concatenate the new keywords with the existing content
            var combinedKeywords = existingKeywords + ', ' + h1Keywords + ', ' + pKeywords;
    
            // Update the content attribute of the meta tag
            $("meta[name='keywords']").attr('content', combinedKeywords);
        });
    </script>
</html>